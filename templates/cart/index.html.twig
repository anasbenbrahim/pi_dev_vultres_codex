{% extends 'baseclient.html.twig' %}

{% block title %}Votre Panier{% endblock %}

{% block what %}Panier{% endblock %}

{% block banner_image %}
	<img src="{{ asset('img/panier_achat_on_0.png') }}" class="img-fluid rounded shadow-sm" alt="Panier">
{% endblock %}

{% block body %}
<section class="container py-4">
	<h1 class="text-center text-primary mb-4">Votre Panier</h1>

	{% include 'cart/flash_messages.html.twig' %}

	<div class="card shadow-sm">
		<div class="card-body">
			{% if dataPanier is not empty %}
				<table class="table table-hover align-middle text-center">
					<thead class="table-primary">
						<tr>
							<th>Produit</th>
							<th>Prix (TND)</th>
							<th>Quantité</th>
							<th>Total (TND)</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						{% for element in dataPanier %}
							<tr>
								<td>
									<strong>{{ element.produit.nomprod }}</strong>
								</td>
								<td class="text-end">
									{{ element.produit.prix }}
								</td>
								<td>
									<span class="badge bg-secondary px-3 py-2">
										{{ element.quantite }}
									</span>
								</td>
								<td class="text-end text-success fw-bold">
									{{ element.quantite * element.produit.prix }}
								</td>
								<td>
									<div class="d-flex justify-content-center gap-2">
										<a href="{{ path("cart_addinmarche", {id: element.produit.id}) }}" class="btn btn-sm btn-success">
											<i class="bi bi-cart-plus"></i>
										</a>
										<a href="{{ path("cart_remove", {id: element.produit.id}) }}" class="btn btn-sm btn-warning">
											<i class="bi bi-cart-dash"></i>
										</a>
										<a href="{{ path("cart_delete", {id: element.produit.id}) }}" class="btn btn-sm btn-danger">
											<i class="bi bi-cart-x"></i>
										</a>
									</div>
								</td>
							</tr>
						{% endfor %}
					</tbody>
					<tfoot class="table-light">
						<tr>
							<td colspan="3" class="text-end fw-bold">Total :</td>
							<td class="text-end text-primary fw-bold">{{ total }} TND</td>
							<td></td>
						</tr>
					</tfoot>
				</table>

				<div class="d-flex justify-content-between mt-3">
					<a href="{{ path('app_marche') }}"  class="btn btn-outline-primary">
						<i class="bi bi-arrow-left"></i> Continuer vos achats
					</a>
					<a href="{{ path('cart_checkout') }}" class="btn btn-success">
                      <i class="bi bi-credit-card"></i> Passer à la commande
                     </a>

				</div>
			{% else %}
				<div class="alert alert-info text-center py-4">
					<i class="bi bi-cart-x fs-1"></i>
					<p class="fs-5 mt-2">Votre panier est vide</p>
					<a href="{{ path('app_marche') }}" class="btn btn-primary mt-2">Voir les produits</a>
				</div>
			{% endif %}
		</div>
	</div>
</section>
{% endblock %}
